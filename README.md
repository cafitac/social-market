# 소셜 마켓 프로젝트

## 프로젝트 진행 방법
- [ ] 모놀리식으로 개발하기 (일단 돌아가는 서비스 만들기)
- [ ] 부하 테스트를 통해 특정 TPS 만족시키기
- [ ] 부하 테스트를 하며 부하 지점 찾기
- [ ] 부하 지점 최적화
  - DB 쿼리 최적화
  - DB connection 관리
  - 등등
- [ ] MSA 아키텍처로 변경 (도메인 단위로 서버를 분리해야하는 요구사항이 생겼다고 가정)
  - [ ] 각 서버간 통신 방법은 http 로 우선 개발 (서버간 통신의 인터페이스는 추후에 바꾸지 않을 수 있도록 개발)
  - [ ] 그 후, 메세지 브로커를 통해 비동기 통신
  - [ ] event-driven architecture 도입

## 요구사항

### 인증

- [x] 사용자가 회원가입을 할 수 있다.
- [x] 사용자가 회원가입을 하면 본인 인증 메일이 발송된다.
- [x] 사용자가 본인 인증을 완료하면 서비스를 정상적으로 이용할 수 있다.
- [x] 사용자가 로그인을 할 수 있다.

### 사용자

- [x] 사용자는 크레딧을 조회할 수 있다.
- [x] 사용자는 결제에 필요한 크레딧을 충전할 수 있다.
    - [ ] 추후 토스페이먼츠 api 를 통해 결제 sdk 를 사용할 예정

### 상품

- [x] 사용자가 상품을 등록할 수 있다.
    - 이름
    - 상세 정보
    - 가격
- [x] 사용자가 상품 목록을 조회할 수 있다.
    - [x] 사용자가 자신이 등록한 상품 목록만 조회할 수 있다.
    - [x] 사용자가 다른 사람이 등록한 상품 목록만 조회할 수 있다.
        - [ ] 추후에 permission 관련 기능 추가 예정
- [x] 사용자가 자신이 등록한 상품 상세 정보를 조회할 수 있다.
    - [x] 사용자가 다른 사람이 등록한 상품 상세 정보를 조회할 수 있다.
- [x] 사용자가 자신이 등록한 상품의 정보를 수정할 수 있다.
    - 이름
    - 상세 정보
    - 가격
    - [x] 다른 사람이 등록한 상품 정보는 수정할 수 없다.
- [x] 사용자가 자신이 등록한 상품을 삭제할 수 있다.
    - [x] Soft delete 적용
    - [x] 다른 사람이 등록한 상품은 삭제할 수 없다.
    - [ ] 상품이 삭제되면 상품을 담은 장바구니에 안에서도 삭제되었다는 것을 나타내야 한다.
- [x] 사용자가 상품 이름으로 상품을 검색할 수 있다.
    - [x] 자신이 등록한 상품은 검색되지 않는다. (다른 사람 상품만)
- [x] 사용자가 상품 재고를 조회할 수 있다.
- [x] 사용자가 상품 재고를 수정할 수 있다.
    - [x] 사용자는 다른 사람의 상품 재고를 수정할 수 없다.

### 장바구니

- [x] 사용자가 장바구니의 상품들을 조회할 수 있다.
- [x] 사용자가 상품을 장바구니에 추가할 수 있다.
- [x] 사용자가 장바구니에 있는 상품의 수를 수정할 수 있다.
    - [x] 사용자가 다른 사람의 장바구니의 상품 수는 수정할 수 없다.
- [x] 사용자가 장바구니에 있는 상품을 제거할 수 있다.
    - Soft delete 적용
    - [x] 사용자가 다른 사람의 장바구니의 상품은 삭제할 수 없다.

### 주문 & 결제

- 주문 절차
    - 상품에 대한 주문서 생성
    - 주문서는 준비 상태 (ready)
    - 상품 재고 차감 검증 및 차감
    - 사용자 크레딧 차감 검증 및 차감
    - 주문서는 결제 완료 상태로 업데이트 (paid)
    - 실패 시, failed 와 reason 표시 (재고 부족, 크레딧 부족)
- [x] 사용자가 상품에 대한 주문을 생성할 수 있다.
- [x] 사용자가 주문에 대한 결제를 진행할 수 있다.
    - [x] 다른 사람의 결제는 진행하지 못한다.
    - [x] 사용자의 크레딧이 차감된다.
    - [x] 크레딧이 부족할 경우, 구매할 수 없다.
    - [x] 상품의 재고가 차감된다.
    - [x] 상품의 재고가 부족할 경우, 구매할 수 없다.
    - [ ] 주문의 상태가 결제 완료가 되면 배송에 대한 정보를 생성한다.

### 배송

- [ ] 상품 판매자가 배송에 대한 처리를 진행할 수 있다.
  - [ ] 상품 준비 중
  - [ ] 상품 택배사로 발송
  - [ ] 택배사 입고
  - [ ] 택배사 출고
  - [ ] 배송 완료

### 배송 완료 처리

### 정산